# AIGis 安全文档目录

本目录包含 AIGis AI 网关的所有安全相关文档。

## 📖 文档索引

### 🔐 核心文档

- **[SECURITY.md](SECURITY.md)** - **必读**: 总体安全声明、已知风险、加固指南
  - 包含 12 个已知安全问题的详细分析
  - P0/P1/P2/P3 风险等级划分
  - 生产环境部署检查清单

### 📋 辅助文档 (未来添加)

- `SECURITY-RELEASES.md` - 安全更新和补丁日志
- `PENETRATION-TESTS.md` - 渗透测试报告和发现
- `COMPLIANCE.md` - 合规性检查 (GDPR, SOC2 等)
- `AUDIT-2025Q4.md` - 安全审计报告

## 🚨 紧急处理流程

### 发现安全问题时

1. **内部发现**: 参照 `SECURITY.md` 中的修复方案
2. **外部报告**: 遵循文档中的漏洞报告流程
3. **立即执行**:
   ```bash
   # 1. 评估风险等级
   # 2. 参照检查清单确认已有的防护
   # 3. 应用临时缓解措施 (如添加 IP 白名单)
   # 4. 规划长期修复
   ```

### 生产部署安全检查

必须执行的安全检查 (来自 `SECURITY.md`):

```bash
# ✅ 验证认证机制
curl -X POST http://localhost:8080/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{"model": "gpt-4", "messages": [{"role": "user", "content": "test"}]}'
# 应该返回 401 (未授权)

# ✅ 验证请求大小限制
# 发送超大请求体，应该被拒绝

# ✅ 验证日志配置
# 确保生产环境不记录敏感数据
```

## 🔑 关键安全原则

### P0 - 不可协商
- ❌ 绝不生产环境无认证部署
- ❌ 绝不允许上游 URL 指向私有 IP
- ❌ 绝不取消请求大小限制

### P1 - 强烈推荐
- ✅ 使用 HTTPS 传输所有数据
- ✅ API Key 通过环境变量管理
- ✅ 日志输出到安全位置

### P2+ - 最佳实践
- 🔄 定期轮换 API Key
- 📊 监控异常请求模式
- 🛡️ 在网关前部署 WAF

## 📞 支持

- **安全问题**: 请参阅 `SECURITY.md` 中的漏洞报告部分
- **配置问题**: 检查 `SECURITY.md` 的 "生产环境推荐配置"
- **代码审查**: 关注 `internal/server/http.go` 和 `internal/core/providers/universal.go`

## 📝 更新日志

| 日期 | 版本 | 变更 |
|------|------|------|
| 2025-12-17 | 1.0 | 初始安全文档发布，包含 12 个已知风险分析 |

---

**⚠️ 注意**: 本文档需要与实际代码保持同步。每次重大安全变更时，必须更新相关文档。
